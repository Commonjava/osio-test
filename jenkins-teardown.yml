---
- hosts: operators
  tasks:
  - name: remove all objects
    k8s:
      host: "{{ k8s_host }}"
      api_key: "{{ k8s_api_key }}"
      username: "{{ k8s_user }}"
      state: absent
      definition:
        apiVersion: v1
        kind: "{{ item.kind }}"
        metadata:
          name: "{{ item.name }}"
          namespace: "{{ k8s_namespace }}"
    with_items:
      - kind: Service
        name: jenkins-web
      - kind: Service
        name: jenkins-agent
      - kind: DeploymentConfig
        name: jenkins
      - kind: PersistentVolumeClaim
        name: jenkins-data
      - kind: Route
        name: jenkins
      - kind: ServiceAccount
        name: jenkins

